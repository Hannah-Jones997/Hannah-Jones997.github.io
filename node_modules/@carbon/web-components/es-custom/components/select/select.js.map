{"version":3,"file":"select.js","sources":["../../../src/components/select/select.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property, query, queryAll } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport ChevronDown16 from '@carbon/icons/lib/chevron--down/16.js';\nimport WarningFilled16 from '@carbon/icons/lib/warning--filled/16.js';\nimport WarningAltFilled16 from '@carbon/icons/lib/warning--alt--filled/16.js';\nimport { prefix } from '../../globals/settings';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport FormMixin from '../../globals/mixins/form';\nimport { filter } from '../../globals/internal/collection-helpers';\nimport { INPUT_SIZE } from '../text-input/text-input';\nimport styles from './select.scss?lit';\nimport ifNonEmpty from '../../globals/directives/if-non-empty';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Select box.\n *\n * @element cds-custom-select\n * @fires cds-custom-select-selected\n *   The name of the custom event fired after an item is selected.\n * @slot helper-text - The helper text.\n * @slot label-text - The label text.\n * @slot validity-message - The validity message. If present and non-empty, this input shows the UI of its invalid state.\n */\n@customElement(`${prefix}-select`)\nclass CDSSelect extends FormMixin(LitElement) {\n  /**\n   * `true` if there is an AI Label.\n   */\n  protected _hasAILabel = false;\n\n  /**\n   * The mutation observer DOM mutation.\n   */\n  private _observerMutation: MutationObserver | null = null;\n\n  /**\n   * The `value` for placeholder `<option>`.\n   */\n  private _placeholderItemValue = `__${prefix}-select-placeholder_${Math.random()\n    .toString(36)\n    .slice(2)}`;\n\n  /**\n   * The select box.\n   */\n  @query('select')\n  private _selectNode!: HTMLSelectElement;\n\n  /**\n   * Input node of `select` element\n   */\n  @query('#input')\n  private _inputNode!: HTMLInputElement;\n\n  /**\n   * Select all <option> nodes with `selected` attribute\n   */\n  @queryAll(`.${prefix}--select-option[selected]`)\n  private _selectedOptionNodes!: HTMLOptionElement[];\n\n  /**\n   * Handles `oninput` event on the `<input>`.\n   *\n   * @param event The event.\n   * @param event.target The event target.\n   */\n  private _handleInput({ target }: Event) {\n    const { value } = target as HTMLSelectElement;\n    this.value = value;\n    const { eventSelect } = this.constructor as typeof CDSSelect;\n    this.dispatchEvent(\n      new CustomEvent(eventSelect, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          value,\n        },\n      })\n    );\n  }\n\n  /**\n   * Handles DOM mutation of `<cds-custom-select-item>` or `<cds-custom-select-item-group>` put in `<cds-custom-select>`, or their changes.\n   * In such event, `<cds-custom-select>` creates the corresponding `<option>` and `<optgroup>`, respectively, into shadow DOM,\n   * with `._renderItems()`.\n   * Doing so allows the shadow DOM style of `<cds-custom-select>` to control the style of the `<option>` and `<optgroup>`,\n   * notably the disabled ones.\n   */\n  private _handleMutation = () => {\n    this.requestUpdate();\n  };\n\n  /**\n   * @param element The parent element containing pseudo `<optgroup>`/`<option>`.\n   * @returns The template containing child `<optgroup>`/`<option>` that will be rendered to shadow DOM.\n   */\n  private _renderItems(element: CDSSelect | HTMLOptGroupElement) {\n    const { selectorItem, selectorLeafItem } = this\n      .constructor as typeof CDSSelect;\n    // Harvests attributes from `<cds-custom-select-item>` and `<cds-custom-select-item-group>`.\n    // Does not use properties to avoid delay in attribute to property mapping, which runs in custom element reaction cycle:\n    // https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element-reactions\n    return html`\n      ${filter(\n        element.childNodes,\n        (item) =>\n          item.nodeType === Node.ELEMENT_NODE &&\n          (item as Element).matches(selectorItem)\n      ).map((item) => {\n        const disabled = item.hasAttribute('disabled');\n        const label = item.getAttribute('label');\n        const selected = item.hasAttribute('selected');\n        const value = item.getAttribute('value');\n        const { textContent } = item;\n        return item.matches(selectorLeafItem)\n          ? html`\n              <option\n                class=\"${prefix}--select-option\"\n                ?disabled=\"${disabled}\"\n                label=\"${ifNonEmpty(label)}\"\n                ?selected=\"${selected}\"\n                value=\"${ifDefined(value)}\">\n                ${textContent}\n              </option>\n            `\n          : html`\n              <optgroup\n                class=\"${prefix}--select-optgroup\"\n                ?disabled=\"${disabled}\"\n                label=\"${ifDefined(label)}\">\n                ${this._renderItems(item)}\n              </optgroup>\n            `;\n      })}\n    `;\n  }\n\n  _handleFormdata(event: FormDataEvent) {\n    const { formData } = event;\n    const { disabled, name, value } = this;\n    if (!disabled) {\n      formData.append(name, value);\n    }\n  }\n\n  /**\n   * Handles `slotchange` event.\n   */\n  protected _handleAILabelSlotChange({ target }: Event) {\n    const hasContent = (target as HTMLSlotElement)\n      .assignedNodes()\n      .filter((elem) =>\n        (elem as HTMLElement).matches !== undefined\n          ? (elem as HTMLElement).matches(\n              (this.constructor as typeof CDSSelect).aiLabelItem\n            ) ||\n            // remove reference to slug in v12\n            (elem as HTMLElement).matches(\n              (this.constructor as typeof CDSSelect).slugItem\n            )\n          : false\n      );\n\n    this._hasAILabel = Boolean(hasContent);\n    this.setAttribute('slug', `${this._hasAILabel}`);\n    (hasContent[0] as HTMLElement).setAttribute('size', 'mini');\n    this.requestUpdate();\n  }\n\n  /**\n   * The count of child `<option>`s.\n   * If the placeholder is in effect, it includes the `<option>` for the placeholder.\n   */\n  get length() {\n    return this._selectNode.length;\n  }\n\n  /**\n   * The child `<option>`s.\n   */\n  get options() {\n    return this._selectNode.options;\n  }\n\n  /**\n   * This form control's type.\n   */\n  get type() {\n    return this._selectNode.type;\n  }\n\n  /**\n   * Sets the select to be focussed automatically on page load. Defaults to false\n   */\n  @property({ type: Boolean })\n  autofocus = false;\n\n  /**\n   * Controls the disabled state of the select\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * The helper text.\n   */\n  @property({ attribute: 'helper-text' })\n  helperText = '';\n\n  /**\n   * Specify whether the label should be hidden, or not\n   */\n  @property({ type: Boolean, attribute: 'hide-label' })\n  hideLabel = false;\n\n  /**\n   * ID to link the `label` and `select`\n   */\n  @property()\n  id = '';\n\n  /**\n   * Specify if the currently value is invalid.\n   */\n  @property({ type: Boolean, reflect: true })\n  invalid = false;\n\n  /**\n   * Message which is displayed if the value is invalid.\n   */\n  @property({ attribute: 'invalid-text' })\n  invalidText = '';\n\n  /**\n   * Specify if the currently value is warn.\n   */\n  @property({ type: Boolean, reflect: true })\n  warn = false;\n\n  /**\n   * Message which is displayed if the value is warn.\n   */\n  @property({ attribute: 'warn-text' })\n  warnText = '';\n\n  /**\n   * The label text.\n   */\n  @property({ attribute: 'label-text' })\n  labelText = '';\n\n  /**\n   * Specify whether you want the inline version of this control\n   */\n  @property({ type: Boolean, reflect: true })\n  inline = false;\n\n  /**\n   * `true` to enable multiple selection.\n   */\n  @property({ type: Boolean })\n  // eslint-disable-next-line class-methods-use-this\n  get multiple() {\n    return false;\n  }\n\n  /**\n   * Name for the select in the `FormData`\n   */\n  @property()\n  name = '';\n\n  /**\n   * Pattern to validate the select against for HTML validity checking\n   */\n  @property()\n  pattern = '';\n\n  /**\n   * Value to display when the select has an empty `value`\n   */\n  @property({ reflect: true })\n  placeholder = '';\n\n  /**\n   * Controls the readonly state of the select\n   */\n  @property({ type: Boolean, reflect: true })\n  readonly = false;\n\n  /**\n   * Boolean property to set the required status\n   */\n  @property({ type: Boolean, reflect: true })\n  required = false;\n\n  /**\n   * The special validity message for `required`.\n   */\n  @property({ attribute: 'required-validity-message' })\n  requiredValidityMessage = 'Please fill out this field.';\n\n  /**\n   * The selected index.\n   */\n  @property({ type: Number })\n  get selectedIndex() {\n    return this._selectNode?.selectedIndex;\n  }\n\n  set selectedIndex(value) {\n    this._selectNode.selectedIndex = value;\n    this.value = this._selectNode.value;\n  }\n\n  /**\n   * The input box size.\n   */\n  @property({ reflect: true })\n  size = INPUT_SIZE.MEDIUM;\n\n  /**\n   * The value of the text area.\n   */\n  @property({ reflect: true })\n  value = '';\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._observerMutation = new MutationObserver(this._handleMutation);\n    this._observerMutation.observe(this, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  disconnectedCallback() {\n    if (this._observerMutation) {\n      this._observerMutation.disconnect();\n      this._observerMutation = null;\n    }\n    super.disconnectedCallback();\n  }\n\n  updated(changedProperties) {\n    if (changedProperties.has('value')) {\n      const { value, _placeholderItemValue: placeholderItemValue } = this;\n      // Ensures setting the `value` after rendering child `<option>`s/`<optgroup>`s when there is a change in `value`,\n      // given reflecting `value` requires child `<option>`s/`<optgroup>`s being there beforehand\n\n      const lastOption =\n        this._selectedOptionNodes?.[this._selectedOptionNodes?.length - 1]?.[\n          'value'\n        ];\n\n      if (value) {\n        this._selectNode.value = value;\n      } else if (lastOption) {\n        this._selectNode.value = lastOption;\n      } else {\n        this._selectNode.value = placeholderItemValue;\n      }\n    }\n\n    const label = this.shadowRoot?.querySelector(\"slot[name='ai-label']\");\n\n    if (label) {\n      if ((label as HTMLSlotElement).assignedNodes()?.length) {\n        this._inputNode?.classList.add(`${prefix}--select-input-has--ai-label`);\n      }\n\n      label?.classList.toggle(\n        `${prefix}--slug--revert`,\n        this.querySelector(`${prefix}-ai-label`)?.hasAttribute('revert-active')\n      );\n    } else {\n      this.shadowRoot\n        ?.querySelector(\"slot[name='slug']\")\n        ?.classList.toggle(\n          `${prefix}--slug--revert`,\n          this.querySelector(`${prefix}-slug`)?.hasAttribute('revert-active')\n        );\n    }\n  }\n\n  render() {\n    const {\n      disabled,\n      helperText,\n      hideLabel,\n      inline,\n      invalid,\n      invalidText,\n      labelText,\n      placeholder,\n      readonly,\n      size,\n      warn,\n      warnText,\n      value,\n      _placeholderItemValue: placeholderItemValue,\n      _handleInput: handleInput,\n      _handleAILabelSlotChange: handleAILabelSlotChange,\n    } = this;\n\n    const inputClasses = classMap({\n      [`${prefix}--select-input`]: true,\n      [`${prefix}--select-input--${size}`]: size,\n    });\n\n    const labelClasses = classMap({\n      [`${prefix}--label`]: true,\n      [`${prefix}--label--disabled`]: disabled,\n    });\n\n    const helperTextClasses = classMap({\n      [`${prefix}--form__helper-text`]: true,\n      [`${prefix}--form__helper-text--disabled`]: disabled,\n    });\n\n    const supplementalText = helperText\n      ? html`\n          <div class=\"${helperTextClasses}\">\n            <slot name=\"helper-text\"> ${helperText} </slot>\n          </div>\n        `\n      : null;\n\n    const errorText =\n      invalid || warn\n        ? html` <div class=\"${prefix}--form-requirement\">\n            ${invalid ? invalidText : warnText}\n          </div>`\n        : null;\n\n    const input = html`\n      <select\n        id=\"input\"\n        class=\"${inputClasses}\"\n        ?disabled=\"${disabled}\"\n        aria-readonly=\"${String(Boolean(readonly))}\"\n        aria-invalid=\"${String(Boolean(invalid))}\"\n        aria-describedby=\"${ifDefined(!invalid ? undefined : 'invalid-text')}\"\n        @input=\"${handleInput}\">\n        ${!placeholder || value\n          ? undefined\n          : html`\n              <option\n                disabled\n                hidden\n                class=\"${prefix}--select-option\"\n                value=\"${placeholderItemValue}\">\n                ${placeholder}\n              </option>\n            `}\n        ${this._renderItems(this)}\n      </select>\n      ${ChevronDown16({\n        class: `${prefix}--select__arrow`,\n        'aria-hidden': true,\n      })}\n      <slot\n        name=\"ai-label\"\n        style=\"--${prefix}-show-before: ${warn || invalid ? 'block' : 'none'}\"\n        @slotchange=${handleAILabelSlotChange}></slot>\n      <slot name=\"slug\" @slotchange=${handleAILabelSlotChange}></slot>\n      ${!invalid\n        ? undefined\n        : WarningFilled16({ class: `${prefix}--select__invalid-icon` })}\n      ${!invalid && warn\n        ? WarningAltFilled16({\n            class: `${prefix}--select__invalid-icon ${prefix}--select__invalid-icon--warning`,\n          })\n        : null}\n    `;\n\n    return html`\n      ${!hideLabel\n        ? html`<label class=\"${labelClasses}\" for=\"input\">\n            <slot name=\"label-text\"> ${labelText} </slot>\n          </label>`\n        : null}\n      ${inline\n        ? html`<div\n            class=\"${prefix}--select-input--inline__wrapper\"\n            ?data-invalid=\"${invalid}\">\n            <div\n              class=\"${prefix}--select-input__wrapper\"\n              ?data-invalid=\"${invalid}\">\n              ${input}\n            </div>\n          </div>`\n        : html`<div\n            class=\"${prefix}--select-input__wrapper\"\n            ?data-invalid=\"${invalid}\">\n            ${input}\n          </div> `}\n      ${errorText ? errorText : supplementalText}\n    `;\n  }\n\n  /**\n   * A selector selecting child pseudo `<optgroup>`/`<option>`.\n   */\n  static get selectorItem() {\n    return `${prefix}-select-item-group,${prefix}-select-item`;\n  }\n\n  /**\n   * A selector selecting child pseudo `<option>`.\n   */\n  static get selectorLeafItem() {\n    return `${prefix}-select-item`;\n  }\n\n  /**\n   * A selector that will return the slug item.\n   *\n   * remove in v12\n   */\n  static get slugItem() {\n    return `${prefix}-slug`;\n  }\n\n  /**\n   * A selector that will return the AI Label item.\n   */\n  static get aiLabelItem() {\n    return `${prefix}-ai-label`;\n  }\n\n  /**\n   * The name of the custom event fired after item is selected.\n   */\n  static get eventSelect() {\n    return `${prefix}-select-selected`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n\nexport default CDSSelect;\n"],"names":["customElement"],"mappings":"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"}