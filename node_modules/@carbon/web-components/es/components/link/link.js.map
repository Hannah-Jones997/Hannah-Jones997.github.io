{"version":3,"file":"link.js","sources":["../../../src/components/link/link.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport FocusMixin from '../../globals/mixins/focus';\nimport styles from './link.scss?lit';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Link size.\n */\nexport const LINK_SIZE = {\n  MEDIUM: 'md',\n  SMALL: 'sm',\n  LARGE: 'lg',\n};\n\n// Convert object key in a type\ntype LINK_SIZE_TYPE = (typeof LINK_SIZE)[keyof typeof LINK_SIZE];\n\n/**\n * Link.\n *\n * @element cds-link\n * @csspart link The link.\n */\n@customElement(`${prefix}-link`)\nclass CDSLink extends FocusMixin(LitElement) {\n  /**\n   * `true` if there is an icon.\n   */\n  private _hasIcon = false;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  protected _handleSlotChange({ target }: Event) {\n    const { name } = target as HTMLSlotElement;\n    const hasContent = (target as HTMLSlotElement)\n      .assignedNodes()\n      .some(\n        (node) => node.nodeType !== Node.TEXT_NODE || node!.textContent!.trim()\n      );\n    this[name === 'icon' ? '_hasIcon' : ''] = hasContent;\n    this.requestUpdate();\n  }\n\n  @query('#link')\n  protected _linkNode?: HTMLAnchorElement | HTMLParagraphElement;\n\n  /**\n   * The CSS class list for the link node.\n   */\n  protected get _classes(): any {\n    const { disabled, size, inline, visited, _hasIcon } = this;\n    return classMap({\n      [`${prefix}--link`]: true,\n      [`${prefix}--link--disabled`]: disabled,\n      [`${prefix}--link--icon`]: _hasIcon,\n      [`${prefix}--link--inline`]: inline,\n      [`${prefix}--link--${size}`]: size,\n      [`${prefix}--link--visited`]: visited,\n    });\n  }\n\n  /**\n   * Handles `click` event on the `<a>`.\n   */\n  // eslint-disable-next-line class-methods-use-this, @typescript-eslint/no-unused-vars\n  protected _handleClick(_: MouseEvent) {}\n\n  /**\n   * @returns The inner content.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  protected _renderInner() {\n    const { _hasIcon: hasIcon, _handleSlotChange: handleSlotChange } = this;\n    return html`\n      <slot @slotchange=\"${handleSlotChange}\"></slot>\n      <div ?hidden=\"${!hasIcon}\" class=\"${prefix}--link__icon\">\n        <slot name=\"icon\" @slotchange=\"${handleSlotChange}\"></slot>\n      </div>\n    `;\n  }\n\n  /**\n   * @returns The disabled link content.\n   */\n  protected _renderDisabledLink() {\n    const { _classes: classes } = this;\n    return html`\n      <p id=\"link\" part=\"link\" class=\"${classes}\">${this._renderInner()}</p>\n    `;\n  }\n\n  /**\n   * @returns The link content.\n   */\n  protected _renderLink() {\n    const {\n      download,\n      href,\n      hreflang,\n      linkRole,\n      ping,\n      rel,\n      target,\n      type,\n      _classes: classes,\n      _handleClick: handleClick,\n    } = this;\n    return html`\n      <a\n        tabindex=\"0\"\n        id=\"link\"\n        role=\"${ifDefined(linkRole)}\"\n        class=\"${classes}\"\n        part=\"link\"\n        download=\"${ifDefined(download)}\"\n        href=\"${ifDefined(href)}\"\n        hreflang=\"${ifDefined(hreflang)}\"\n        ping=\"${ifDefined(ping)}\"\n        rel=\"${ifDefined(rel)}\"\n        target=\"${ifDefined(target)}\"\n        type=\"${ifDefined(type)}\"\n        @click=\"${handleClick}\">\n        ${this._renderInner()}\n      </a>\n    `;\n  }\n\n  /**\n   * `true` if the link should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * The default file name.\n   */\n  @property({ reflect: true })\n  download!: string;\n\n  /**\n   * Link `href`.\n   */\n  @property({ reflect: true })\n  href!: string;\n\n  /**\n   * The language of what `href` points to.\n   */\n  @property({ reflect: true })\n  hreflang!: string;\n\n  /**\n   * `true` if the link should be inline.\n   */\n  @property({ type: Boolean, reflect: true })\n  inline = false;\n\n  /**\n   * The a11y role for `<a>`.\n   */\n  @property({ attribute: 'link-role' })\n  linkRole!: string;\n\n  /**\n   * URLs to ping.\n   */\n  @property({ reflect: true })\n  ping!: string;\n\n  /**\n   * The link type.\n   */\n  @property({ reflect: true })\n  rel!: string;\n\n  /**\n   * Link size.\n   */\n  @property({ reflect: true })\n  size: LINK_SIZE_TYPE = LINK_SIZE.MEDIUM;\n\n  /**\n   * The link target.\n   */\n  @property({ reflect: true })\n  target!: string;\n\n  /**\n   * MIME type of the `target`.\n   */\n  @property({ reflect: true })\n  type!: string;\n\n  /**\n   * `true` if the link has been visited.\n   */\n  @property({ type: Boolean, reflect: true })\n  visited = false;\n\n  render() {\n    const { disabled } = this;\n    return disabled ? this._renderDisabledLink() : this._renderLink();\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n\nexport default CDSLink;\n"],"names":["customElement"],"mappings":"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"}