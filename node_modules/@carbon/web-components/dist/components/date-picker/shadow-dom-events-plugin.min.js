/**
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/tslib
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@lit/context
 * https://www.npmjs.com/package/lodash-es
 * https://www.npmjs.com/package/@floating-ui/dom
 * https://www.npmjs.com/package/flatpickr
 * https://www.npmjs.com/package/lit-html
 * https://www.npmjs.com/package/lit-element
 * https://www.npmjs.com/package/@lit/reactive-element
 * https://www.npmjs.com/package/@floating-ui/core
 * https://www.npmjs.com/package/@floating-ui/utils
 */

import e from"../../globals/mixins/on.min.js";import{find as t}from"../../globals/internal/collection-helpers.min.js";const n={ArrowLeft:-1,Left:-1,ArrowUp:-7,Up:-7,ArrowRight:1,Right:1,ArrowDown:7,Down:7},i={ArrowLeft:-1,Left:-1,ArrowUp:-12,Up:-12,ArrowRight:1,Right:1,ArrowDown:12,Down:12};var o=()=>o=>{const r=e=>{const{ctrlKey:r,key:a,target:l}=e;if("Enter"===a)l.dispatchEvent(Object.assign(new CustomEvent("mousedown",{bubbles:!0}),{which:1}));else if(!r&&a in n){const{dateObj:i}=l,r=((e,{date:t=0})=>{const n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())+864e5*t);return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())})(i,{date:n[a]}),d=(s=r,t(o.daysContainer.firstElementChild.children,(({dateObj:e})=>s.getTime()===e.getTime())));if(d)d.focus();else{const e=o.daysContainer.firstElementChild;r.getTime()<e.firstElementChild.dateObj.getTime()?(o.changeMonth(-1),o.daysContainer.firstElementChild.lastElementChild.focus()):r.getTime()>e.lastElementChild.dateObj.getTime()&&(o.changeMonth(1),o.daysContainer.firstElementChild.firstElementChild.focus())}e.preventDefault()}else r&&a in i&&(o.changeMonth(i[a]),o.daysContainer.firstElementChild.firstElementChild.focus(),e.preventDefault());var s},a=()=>{o._hCDSCEDatePickerShadowDOMEventsPluginKeydown&&(o._hCDSCEDatePickerShadowDOMEventsPluginKeydown=o._hCDSCEDatePickerShadowDOMEventsPluginKeydown.release())};return{onReady:[()=>{o.loadedPlugins.push("carbonFlatpickrShadowDOMEventsPlugin")},()=>{a(),o._hCDSCEDatePickerShadowDOMEventsPluginKeydown=e(o.calendarContainer,"keydown",r)}],onDestroy:[a]}};export{o as default};
