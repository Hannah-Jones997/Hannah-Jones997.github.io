/**
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/tslib
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@lit/context
 * https://www.npmjs.com/package/lodash-es
 * https://www.npmjs.com/package/@floating-ui/dom
 * https://www.npmjs.com/package/flatpickr
 * https://www.npmjs.com/package/lit-html
 * https://www.npmjs.com/package/lit-element
 * https://www.npmjs.com/package/@lit/reactive-element
 * https://www.npmjs.com/package/@floating-ui/core
 * https://www.npmjs.com/package/@floating-ui/utils
 */

import{__decorate as e}from"../../node_modules/tslib/tslib.es6.min.js";import{classMap as t}from"../../node_modules/lit-html/directives/class-map.min.js";import{ifDefined as i}from"../../node_modules/lit-html/directives/if-defined.min.js";import"../../node_modules/@lit/reactive-element/reactive-element.min.js";import{html as o}from"../../node_modules/lit-html/lit-html.min.js";import{LitElement as a}from"../../node_modules/lit-element/lit-element.min.js";import{property as l}from"../../node_modules/@lit/reactive-element/decorators/property.min.js";import{query as s}from"../../node_modules/@lit/reactive-element/decorators/query.min.js";import{prefix as n}from"../../globals/settings.min.js";import r from"../../globals/mixins/focus.min.js";import d from"../../globals/mixins/form.min.js";import c from"../../packages/icons/lib/warning--filled/16.min.js";import h from"../../packages/icons/lib/warning--alt--filled/16.min.js";import m from"./checkbox.scss.min.js";import{carbonElement as p}from"../../globals/decorators/carbon-element.min.js";let b=class extends(r(d(a))){constructor(){super(...arguments),this.checked=!1,this.dataTable=!1,this.disabled=!1,this.hideCheckbox=!1,this.hideLabel=!1,this.id="checkbox",this.indeterminate=!1,this.labelText="",this.readonly=!1,this.invalid=!1,this.title="",this.warn=!1,this.warnText=!1,this._hasAILabel=!1}_handleChange(){const{checked:e,indeterminate:t}=this._checkboxNode;this.checked=e,this.indeterminate=t;const{eventChange:i}=this.constructor;this.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0,detail:{checked:e,indeterminate:t}}))}_handleClick(e){this.readonly&&e.preventDefault()}_handleFormdata(e){const{formData:t}=e,{checked:i,disabled:o,name:a,value:l="on"}=this;!o&&i&&t.append(a,l)}_handleSlotChange({target:e}){const t=e.assignedNodes().filter((e=>void 0!==e.matches&&(e.matches(this.constructor.aiLabelItem)||e.matches(this.constructor.slugItem))));this._hasAILabel=Boolean(t);const i=t[0].getAttribute("kind");t[0].setAttribute("size","inline"===i?"md":"mini"),this.requestUpdate()}updated(){const{_hasAILabel:e,defaultChecked:t}=this;e?this.setAttribute("ai-label",""):this.removeAttribute("ai-label"),t&&(this.checked=t)}render(){const{checked:e,disabled:a,helperText:l,hideLabel:s,id:r,indeterminate:d,invalid:m,invalidText:p,labelText:b,name:u,readonly:v,title:f,value:y,warn:$,warnText:g,defaultChecked:k,_handleChange:x,_handleClick:_}=this,j=!v&&!m&&$,C=!m&&!$,w=l?o` <div class="${n}--form__helper-text">${l}</div>`:null,B=t({[`${n}--checkbox-label`]:!0}),T=t({[`${n}--checkbox-label-text`]:!0,[`${n}--visually-hidden`]:s});return o`
      <input
        id="${i(r)}"
        type="checkbox"
        part="input"
        class="${`${n}--checkbox`}"
        aria-readonly="${String(Boolean(v))}"
        ?checked="${e}"
        ?data-invalid="${m}"
        ?disabled="${a}"
        ?defaultChecked="${k}"
        .indeterminate="${d}"
        name="${i(u)}"
        value="${i(y)}"
        @change="${x}"
        @click="${_}" />
      <label
        for="${i(r)}"
        part="label"
        class="${B}"
        title="${i(f)}">
        <span class="${T}"
          >${b||o`<slot></slot>`}</span
        >
      </label>
      <slot name="ai-label" @slotchange="${this._handleSlotChange}"></slot>
      <slot name="decorator" @slotchange="${this._handleSlotChange}"></slot>
      <slot name="slug" @slotchange="${this._handleSlotChange}"></slot>
      <div class="${n}--checkbox__validation-msg">
        ${!v&&m?o`
              ${c({class:`${n}--checkbox__invalid-icon`})}
              <div class="${n}--form-requirement">${p}</div>
            `:null}
        ${j?o`
              ${h({class:`${n}--checkbox__invalid-icon ${n}--checkbox__invalid-icon--warning`})}
              <div class="${n}--form-requirement">${g}</div>
            `:null}
      </div>
      ${C?w:null}
    `}static get eventChange(){return`${n}-checkbox-changed`}static get slugItem(){return`${n}-slug`}static get aiLabelItem(){return`${n}-ai-label`}};b.shadowRootOptions=Object.assign(Object.assign({},a.shadowRootOptions),{delegatesFocus:!0}),b.styles=m,e([s("input")],b.prototype,"_checkboxNode",void 0),e([l({type:Boolean,reflect:!0,attribute:"checked"})],b.prototype,"checked",void 0),e([l({type:Boolean,reflect:!0,attribute:"data-table"})],b.prototype,"dataTable",void 0),e([l({type:Boolean,reflect:!0})],b.prototype,"disabled",void 0),e([l({type:String,reflect:!0,attribute:"helper-text"})],b.prototype,"helperText",void 0),e([l({type:Boolean,reflect:!0,attribute:"hide-checkbox"})],b.prototype,"hideCheckbox",void 0),e([l({type:Boolean,reflect:!0,attribute:"hide-label"})],b.prototype,"hideLabel",void 0),e([l({reflect:!0})],b.prototype,"id",void 0),e([l({type:Boolean,reflect:!0})],b.prototype,"indeterminate",void 0),e([l({attribute:"label-text"})],b.prototype,"labelText",void 0),e([l()],b.prototype,"name",void 0),e([l({type:Boolean,reflect:!0})],b.prototype,"readonly",void 0),e([l({type:Boolean})],b.prototype,"invalid",void 0),e([l({type:String,attribute:"invalid-text"})],b.prototype,"invalidText",void 0),e([l({attribute:"title"})],b.prototype,"title",void 0),e([l()],b.prototype,"value",void 0),e([l({type:Boolean})],b.prototype,"warn",void 0),e([l({type:String,attribute:"warn-text"})],b.prototype,"warnText",void 0),e([l({type:Boolean,attribute:"default-checked"})],b.prototype,"defaultChecked",void 0),b=e([p(`${n}-checkbox`)],b);var u=b;export{u as default};
