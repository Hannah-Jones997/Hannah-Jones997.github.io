/**
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/tslib
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@lit/context
 * https://www.npmjs.com/package/lodash-es
 * https://www.npmjs.com/package/@floating-ui/dom
 * https://www.npmjs.com/package/flatpickr
 * https://www.npmjs.com/package/lit-html
 * https://www.npmjs.com/package/lit-element
 * https://www.npmjs.com/package/@lit/reactive-element
 * https://www.npmjs.com/package/@floating-ui/core
 * https://www.npmjs.com/package/@floating-ui/utils
 */

import{__decorate as e}from"../../node_modules/tslib/tslib.es6.min.js";import{classMap as t}from"../../node_modules/lit-html/directives/class-map.min.js";import"../../node_modules/@lit/reactive-element/reactive-element.min.js";import{html as o}from"../../node_modules/lit-html/lit-html.min.js";import{LitElement as i}from"../../node_modules/lit-element/lit-element.min.js";import{property as s}from"../../node_modules/@lit/reactive-element/decorators/property.min.js";import{query as a}from"../../node_modules/@lit/reactive-element/decorators/query.min.js";import{prefix as n}from"../../globals/settings.min.js";import{ifDefined as l}from"../../node_modules/lit-html/directives/if-defined.min.js";import r from"../../globals/decorators/host-listener.min.js";import d from"../../globals/mixins/focus.min.js";import c from"../../globals/mixins/host-listener.min.js";import h,{NAVIGATION_DIRECTION as m}from"../../globals/internal/radio-group-manager.min.js";import{RADIO_BUTTON_ORIENTATION as p,RADIO_BUTTON_LABEL_POSITION as u}from"./defs.min.js";import b from"./radio-button.scss.min.js";import{carbonElement as g}from"../../globals/decorators/carbon-element.min.js";const _={ArrowLeft:m.BACKWARD,Left:m.BACKWARD,ArrowRight:m.FORWARD,Right:m.FORWARD},v={ArrowUp:m.BACKWARD,Up:m.BACKWARD,ArrowDown:m.FORWARD,Down:m.FORWARD};class f{constructor(e){this._radio=e}get checked(){return this._radio.checked}set checked(e){const{host:t}=this._radio.getRootNode(),{eventChange:o}=t.constructor;t.checked=e,this._radio.tabIndex=e?0:-1,t.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{checked:e}}))}get tabIndex(){return this._radio.tabIndex}set tabIndex(e){this._radio.tabIndex=e}get name(){return this._radio.name}compareDocumentPosition(e){return this._radio.compareDocumentPosition(e._radio)}focus(){this._radio.focus()}}let y=class extends(c(d(i))){constructor(){super(...arguments),this._manager=null,this._handleClick=e=>{var t,o;if(!e.target.matches(null===(t=this.constructor)||void 0===t?void 0:t.aiLabelItem)&&!e.target.matches(null===(o=this.constructor)||void 0===o?void 0:o.slugItem)){const{disabled:e,_radioButtonDelegate:t}=this;!t||e||this.disabledItem||(this.checked=!0,this._manager&&this._manager.select(t,this.readOnly),this.dispatchEvent(new CustomEvent(this.constructor.eventChange,{bubbles:!0,composed:!0,detail:{checked:this.checked}}))),this.dispatchEvent(new CustomEvent(this.constructor.eventChange,{bubbles:!0,composed:!0,detail:{checked:this.checked}}))}},this._handleKeydown=e=>{var t,o;if(!e.target.matches(null===(t=this.constructor)||void 0===t?void 0:t.aiLabelItem)&&!e.target.matches(null===(o=this.constructor)||void 0===o?void 0:o.slugItem)){const{orientation:t,_radioButtonDelegate:o}=this,i=this._manager;if(o&&i){const s=(t===p.HORIZONTAL?_:v)[e.key];s&&i.select(i.navigate(o,s),this.readOnly)," "!==e.key&&"Enter"!==e.key||i.select(o,this.readOnly)}}},this._hasAILabel=!1,this.checked=!1,this.dataTable=!1,this.disabledItem=!1,this.disabled=!1,this.hideLabel=!1,this.invalid=!1,this.labelPosition=u.RIGHT,this.labelText="",this.orientation=p.HORIZONTAL,this.readOnly=!1}_handleSlotChange({target:e}){const t=e.assignedNodes().filter((e=>void 0!==e.matches&&(e.matches(this.constructor.aiLabelItem)||e.matches(this.constructor.slugItem))));this._hasAILabel=Boolean(t);const o=t[0].getAttribute("kind");t[0].setAttribute("size","inline"===o?"md":"mini"),this.requestUpdate()}disconnectedCallback(){this._manager&&this._manager.delete(this._radioButtonDelegate),super.disconnectedCallback()}firstUpdated(){this._radioButtonDelegate=new f(this._inputNode)}updated(e){const{_hasAILabel:t,_inputNode:o,_radioButtonDelegate:i,name:s}=this;if(e.has("checked")||e.has("name")){this.readOnly&&(this.checked=!1),this._manager||(this._manager=h.get(this.getRootNode({composed:!0})));const{_manager:t}=this;e.has("name")&&(t.delete(i,e.get("name")),s&&t.add(i)),o.setAttribute("tabindex",s&&t&&t.shouldBeFocusable(i)?"0":"-1")}t?this.setAttribute("ai-label",""):this.removeAttribute("ai-label")}render(){const{checked:e,hideLabel:i,labelText:s,name:a,value:r,disabled:d,disabledItem:c}=this,h=t({[`${n}--radio-button__label-text`]:!0,[`${n}--visually-hidden`]:i});return o`
      <input
        id="radio"
        type="radio"
        class="${n}--radio-button"
        .checked=${e}
        ?disabled="${c||d}"
        name=${l(a)}
        value=${l(r)} />
      <label for="input" class="${n}--radio-button__label">
        <span class="${n}--radio-button__appearance"></span>
        <span class="${h}">
          ${s}
          <slot name="ai-label" @slotchange="${this._handleSlotChange}"></slot>
          <slot name="slug" @slotchange="${this._handleSlotChange}"></slot
        ></span>
      </label>
    `}static get slugItem(){return`${n}-slug`}static get aiLabelItem(){return`${n}-ai-label`}static get eventChange(){return`${n}-radio-button-changed`}};y.shadowRootOptions=Object.assign(Object.assign({},i.shadowRootOptions),{delegatesFocus:!0}),y.styles=b,e([a("input")],y.prototype,"_inputNode",void 0),e([r("click")],y.prototype,"_handleClick",void 0),e([r("keydown")],y.prototype,"_handleKeydown",void 0),e([s({type:Boolean,reflect:!0})],y.prototype,"checked",void 0),e([s({type:Boolean,reflect:!0,attribute:"data-table"})],y.prototype,"dataTable",void 0),e([s({type:Boolean,reflect:!0})],y.prototype,"disabledItem",void 0),e([s({type:Boolean,reflect:!0})],y.prototype,"disabled",void 0),e([s({type:Boolean,reflect:!0,attribute:"hide-label"})],y.prototype,"hideLabel",void 0),e([s({type:Boolean,reflect:!0})],y.prototype,"invalid",void 0),e([s({reflect:!0,attribute:"label-position"})],y.prototype,"labelPosition",void 0),e([s({attribute:"label-text"})],y.prototype,"labelText",void 0),e([s()],y.prototype,"name",void 0),e([s({reflect:!0})],y.prototype,"orientation",void 0),e([s({type:Boolean,reflect:!0})],y.prototype,"readOnly",void 0),e([s()],y.prototype,"value",void 0),y=e([g(`${n}-radio-button`)],y);export{u as RADIO_BUTTON_LABEL_POSITION};
