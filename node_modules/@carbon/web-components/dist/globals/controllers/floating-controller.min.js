/**
 * Copyright IBM Corp. 2019, 2020
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license
 * 
 * This bundle contains the following third-party dependencies:
 * 
 * Also refer to the following links for the license of other third-party dependencies:
 * 
 * https://www.npmjs.com/package/tslib
 * https://www.npmjs.com/package/lit
 * https://www.npmjs.com/package/@lit/context
 * https://www.npmjs.com/package/lodash-es
 * https://www.npmjs.com/package/@floating-ui/dom
 * https://www.npmjs.com/package/flatpickr
 * https://www.npmjs.com/package/lit-html
 * https://www.npmjs.com/package/lit-element
 * https://www.npmjs.com/package/@lit/reactive-element
 * https://www.npmjs.com/package/@floating-ui/core
 * https://www.npmjs.com/package/@floating-ui/utils
 */

import{autoUpdate as t,computePosition as e,flip as s,offset as o,arrow as a,size as l}from"../../node_modules/@floating-ui/dom/dist/floating-ui.dom.min.js";class i{constructor(t){this.updatePlacement=()=>{this.computePlacement()},this.host=t,t.addController(this)}async setPlacement(e=this.options){this.options=e;const{trigger:s,target:o}=e;this.cleanup=t(s,o,this.updatePlacement)}async computePlacement(){var t;const{arrowElement:i,alignment:n,caret:r,trigger:p,target:h,styleElement:c,matchWidth:m,open:d,flipArguments:g,alignmentAxisOffset:f}=this.options,u=null!=c?c:h;if(!u)return;let b;switch(n){case"top-left":b="top-start";break;case"top-right":b="top-end";break;case"bottom-left":b="bottom-start";break;case"bottom-right":b="bottom-end";break;case"left-bottom":b="left-end";break;case"left-top":b="left-start";break;case"right-bottom":b="right-end";break;case"right-top":b="right-start";break;default:b=n}const y=[s(g),o((null!=f?f:0)+(r?10:0)),...r&&i?[a({element:i,padding:15})]:[],...!m||"bottom"!==b&&"top"!==b?[l({apply({elements:t}){t.floating.style.removeProperty("width")}})]:[l({apply({rects:t,elements:e}){e.floating.style.width=`${t.reference.width}px`}})]];if(d){const{x:s,y:o,placement:a,middlewareData:l,strategy:n}=await e(p,u,{strategy:"fixed",middleware:y,placement:b});if(u.style.left=`${s}px`,u.style.top=`${o}px`,u.style.position=`${n}`,i){const{x:t,y:e}=l.arrow,s={top:"bottom",right:"left",bottom:"top",left:"right"}[a.split("-")[0]];i.style.left=null!=t?`${t}px`:"",i.style.top=null!=e?`${e}px`:"",i.style.right="",i.style.bottom="",i.style[s]=-i.offsetWidth/2+"px"}"CDS-AI-LABEL"!==this.host.tagName&&"CDS-SLUG"!==this.host.tagName||null===(t=this.host)||void 0===t||t.setAttribute("alignment",a)}}hostUpdated(){var t;this.host.hasAttribute("open")||(null===(t=this.cleanup)||void 0===t||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;null===(t=this.cleanup)||void 0===t||t.call(this),this.cleanup=void 0}}export{i as default};
